\begin{abstract}

This paper introduces \textsc{\large five} (Framework for Indoor Virtual Environments) and \textsc{\large hijson} (Hierarchical Interactive JSON), respectively a web toolkit for indoor mapping applications and a novel cartographic document format. Client-side \textsc{\large five} applications, entirely based on web technologies, rely on \textsc{\large hijson} documents produced server-side using \textsc{\large lar}, a novel representation scheme for topology and geometry.

An \emph{interactive indoor mapping} environment is a virtual reconstruction of a physical indoor space, where the user may interact with virtual objects, experienced in the actual position they occupy in the real world. Our approach outlines a specialized and evoluted  3D \emph{user interface} giving a glimpse of a section of the real world, that the user can handle intuitively.  Furthermore, the virtual indoor environment API provides a platform where many different applications can rely upon. Accessible via web browsers from any kind of device, several applications may coexist on this platform. IoT monitoring, realtime multi-person tracking, and  cross-storey user navigation, are already implemented using an automatic search for all valid walkable routes, and taking into account both architectural obstacles and furniture.

The \textsc{\large hijson} format is used to represent any geometry of the indoor space of complex buildings, capturing their hierarchical structure, a complete representation of their topology, and all the objects (either smart or not) contained inside. Such textual representation allows the \textsc{\large five} framework to offer a web environment in which the user is presented with 2D or 3D models to navigate. With respect to current cartographic formats, \textsc{\large hijson} suggests four major enhancements: (a) exposes a hierarchical structure; (b) uses local metric coordinate systems; (c) may import external geometric models; (d) accepts semantic extensions.
The semantic extensions supported by the \textsc{\large five} architecture encapsulate the details about communication protocols, rendering style, and exchanged and displayed information, allowing the \textsc{\large hijson} format to be extended with any sort of models of objects, sensors or behaviors.

\end{abstract}
